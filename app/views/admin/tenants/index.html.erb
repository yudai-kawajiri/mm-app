<%= content_for(:title, t('admin.tenants.index.title')) %>

<div data-controller="resource-search">
  <%= render 'shared/layouts/header_with_actions',
      title: t('admin.tenants.index.title'),
      resource: nil,
      is_index_page: true,
      is_form_page: false,
      is_show_page: false,
      new_path: new_admin_tenant_path %>

  <%= render 'shared/components/resource_list',
      resources: @tenants,
      resource_class: Tenant,
      search_target: "name",
      search_name_proc: Proc.new { |tenant| "#{tenant.name} #{tenant.subdomain}" },
      sort_options: [
        [t('admin.tenants.index.sort_options.name'), 'name'],
        [t('admin.tenants.index.sort_options.subdomain'), 'subdomain'],
        [t('admin.tenants.index.sort_options.created_at'), 'created_at']
      ],
      sort_placeholder: t('admin.tenants.index.sort_placeholder'),
      icon_mode: true,
      show_copy: false,
      scope: [:admin],

      columns: [
        { header: :name, data: Proc.new { |tenant| tenant.name } },
        { header: :subdomain, data: Proc.new { |tenant| tenant.subdomain } },
        { header: :created_at, data: Proc.new { |tenant| l(tenant.created_at.to_date, format: :default) } }
      ]
  %>

  <%= paginate @tenants, theme: 'bootstrap-5' %>
</div>
