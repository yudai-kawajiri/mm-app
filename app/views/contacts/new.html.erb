<% content_for :title, t('contacts.new.title') %>

<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <h1 class="mb-4"><%= t('contacts.new.title') %></h1>
      <p class="text-muted mb-4"><%= t('contacts.new.subtitle') %></p>

      <div class="card">
        <div class="card-body">
          <%= form_with model: @contact, url: contacts_path, local: true do |f| %>
            <%= render 'shared/forms/error_messages', resource: f.object %>

            <div class="mb-3">
              <%= f.label :name, t('contacts.form.name'), class: 'form-label' %>
              <%= f.text_field :name, class: 'form-control', placeholder: t('contacts.form.name_placeholder'), autofocus: true %>
            </div>

            <div class="mb-3">
              <%= f.label :email, t('contacts.form.email'), class: 'form-label' %>
              <%= f.email_field :email, class: 'form-control', placeholder: t('contacts.form.email_placeholder') %>
            </div>

            <div class="mb-3">
              <%= f.label :subject, t('contacts.form.subject'), class: 'form-label' %>
              <%= f.text_field :subject, class: 'form-control', placeholder: t('contacts.form.subject_placeholder') %>
            </div>

            <div class="mb-3"
                 data-controller="input--character-counter"
                 data-input--character-counter-max-value="5000">
              <%= f.label :message, t('contacts.form.message'), class: 'form-label' %>
              <%= f.text_area :message,
                  rows: 8,
                  class: 'form-control',
                  placeholder: t('contacts.form.message_placeholder'),
                  maxlength: 5000,
                  data: {
                    input__character_counter_target: "input",
                    action: "input->input--character-counter#updateCount"
                  } %>
              <div class="form-text d-flex justify-content-between align-items-center mt-1">
                <span><%= t('contacts.form.message_hint') %></span>
                <span>
                  <span data-input--character-counter-target="count" class="text-muted">0</span> / 5000 文字
                  (残り <span data-input--character-counter-target="remaining" class="text-muted">5000</span> 文字)
                </span>
              </div>
            </div>

            <div class="d-grid gap-2">
              <%= f.submit t('contacts.form.submit'), class: 'btn btn-primary btn-lg' %>
            </div>
          <% end %>
        </div>
      </div>

      <div class="mt-4 text-center">
        <% if user_signed_in? %>
          <%= link_to t('helpers.link.back'), help_path, class: 'btn btn-outline-secondary' %>
        <% else %>
          <%= link_to t('landing.back_to_top'), root_path, class: 'btn btn-outline-secondary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>
