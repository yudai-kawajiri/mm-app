<% if params[:logout] == 'success' %>
  <div class="alert alert-success alert-dismissible fade show m-3" role="alert" id="logout-alert">
    <i class="bi bi-check-circle-fill me-2"></i>ログアウトしました
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  <script>
    // URLからクエリパラメータを削除
    const url = new URL(window.location);
    url.searchParams.delete('logout');
    window.history.replaceState({}, '', url);
    
    // 3秒後に自動で消す
    setTimeout(() => {
      const alert = document.getElementById('logout-alert');
      if (alert) alert.remove();
    }, 3000);
  </script>
<% end %>

<div class="container mt-5" data-controller="subdomain-redirect" data-subdomain-redirect-error-message-value="<%= t('landing.subdomain_required') %>">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-primary mb-3">
          <%= t('landing.title') %>
        </h1>
        <p class="lead text-muted">
          <%= t('landing.subtitle') %>
        </p>
      </div>

      <div class="card shadow mb-5">
        <div class="card-body p-4 p-md-5">
          <p class="text-center text-muted mb-4">
            <%= t('landing.description') %>
          </p>

          <div class="mb-4">
            <label for="subdomain" class="form-label fw-bold"><%= t('landing.subdomain_label') %></label>
            <div class="input-group">
              <input type="text" id="subdomain" class="form-control" placeholder="<%= t('landing.subdomain_placeholder') %>" aria-label="<%= t('landing.subdomain_label') %>" data-subdomain-redirect-target="input">
              <span class="input-group-text">.localhost:3000</span>
            </div>
            <small class="text-muted d-block mt-1"><%= t('landing.subdomain_hint') %></small>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <button data-action="click->subdomain-redirect#redirect" data-path="/users/sign_in" class="btn btn-primary btn-lg w-100">
                <%= t('landing.login_button') %>
              </button>
            </div>
            <div class="col-md-6">
              <button data-action="click->subdomain-redirect#redirect" data-path="/users/sign_up" class="btn btn-outline-secondary btn-lg w-100">
                <%= t('landing.signup_button') %>
              </button>
            </div>
          </div>

          <div class="text-center mt-4">
            <p class="text-muted small mb-2"><%= t('landing.or') %></p>
            <%= link_to t('landing.new_company_button'), new_application_request_path, class: 'btn btn-success w-100' %>
          </div>
        </div>
      </div>

      <div class="mb-5">
        <h3 class="h4 text-center mb-4"><%= t('landing.features.title') %></h3>
        <div class="row g-3">
          <div class="col-sm-6 col-lg-3">
            <div class="card h-100 text-center border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-box-seam fs-1 text-primary"></i>
                </div>
                <h4 class="h6 fw-bold mb-2"><%= t('landing.features.resources.title') %></h4>
                <p class="small text-muted mb-0"><%= t('landing.features.resources.description') %></p>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3">
            <div class="card h-100 text-center border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-calendar-check fs-1 text-success"></i>
                </div>
                <h4 class="h6 fw-bold mb-2"><%= t('landing.features.planning.title') %></h4>
                <p class="small text-muted mb-0"><%= t('landing.features.planning.description') %></p>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3">
            <div class="card h-100 text-center border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-graph-up fs-1 text-info"></i>
                </div>
                <h4 class="h6 fw-bold mb-2"><%= t('landing.features.management.title') %></h4>
                <p class="small text-muted mb-0"><%= t('landing.features.management.description') %></p>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3">
            <div class="card h-100 text-center border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-speedometer2 fs-1 text-warning"></i>
                </div>
                <h4 class="h6 fw-bold mb-2"><%= t('landing.features.forecast.title') %></h4>
                <p class="small text-muted mb-0"><%= t('landing.features.forecast.description') %></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
