<div class="row">
  <%# 左カラム: 原材料名 %>
  <div class="col-md-6">
    <%= form_group_lg(f, :name) %>
  </div>

  <%# 右カラム: カテゴリー %>
  <div class="col-md-6">
    <%= form_group_lg(f, :category_id,
        field_type: :collection_select,
        collection: @material_categories
    ) %>
  </div>
</div>

<div data-controller="measurement-type">
  <%# 共通フィールド（常に表示） %>
  <div class="row">
    <%# 左カラム: 基本使用量/個数 %>
    <div class="col-md-6">
      <div class="form-group mb-4">
        <%= f.label :default_unit_weight, Material.human_attribute_name(:default_unit_weight), class: 'form-label h5' %>
        <%= f.text_field :default_unit_weight,
            class: 'form-control form-control-lg',
            data: {
              controller: 'number-input',
              'number-input-no-comma': 'true',
              action: 'input->number-input#handleInput paste->number-input#handlePaste',
              'form-validation-target': 'field'
            }
        %>
      </div>
    </div>

    <%# 右カラム: 使用単位 %>
    <div class="col-md-6">
      <%= form_group_lg(f, :unit_for_product_id,
          field_type: :collection_select,
          collection: current_user.units.where(category: :production),
          label: Material.human_attribute_name(:unit_for_product)
      ) %>
    </div>
  </div>

  <%# 基本発注入数フィールドと発注単位（横並び） %>
  <div class="row">
    <%# 左カラム: 基本発注入数フィールド（条件付き） %>
    <div class="col-md-6">
      <%# ラベルとラジオボタン（常に表示） %>
      <div class="d-flex align-items-center gap-3 mb-2">
        <label class="form-label mb-0" style="font-size: 1.25rem; font-weight: 400;">
          <span data-measurement-type-target="weightLabel" style="<%= 'display: none;' if f.object.measurement_type == 'count' %>">
            基本発注量（g）
          </span>
          <span data-measurement-type-target="countLabel" style="<%= 'display: none;' unless f.object.measurement_type == 'count' %>">
            基本発注入数
          </span>
        </label>
        <div class="form-check">
          <%= f.radio_button :measurement_type, 'weight',
              checked: f.object.measurement_type != 'count',
              class: 'form-check-input',
              data: {
                action: 'change->measurement-type#toggleFields'
              } %>
          <%= f.label :measurement_type_weight, t('materials.measurement_types.weight'), class: 'form-check-label' %>
        </div>
        <div class="form-check">
          <%= f.radio_button :measurement_type, 'count',
              class: 'form-check-input',
              data: {
                action: 'change->measurement-type#toggleFields'
              } %>
          <%= f.label :measurement_type_count, t('materials.measurement_types.count'), class: 'form-check-label' %>
        </div>
      </div>

      <%# 重量ベース専用フィールド %>
      <div data-measurement-type-target="weightFields" style="<%= 'display: none;' if f.object.measurement_type == 'count' %>">
        <div class="mb-4">
          <%= f.text_field :unit_weight_for_order,
            class: 'form-control form-control-lg',
            data: {
              controller: 'number-input',
              'number-input-no-comma': 'true',
              action: 'input->number-input#handleInput paste->number-input#handlePaste'
            }
          %>
        </div>
      </div>

      <%# 個数ベース専用フィールド %>
      <div data-measurement-type-target="countFields" style="<%= 'display: none;' unless f.object.measurement_type == 'count' %>">
        <div class="mb-4">
          <%= f.text_field :pieces_per_order_unit,
            class: 'form-control form-control-lg',
            data: {
              controller: 'number-input',
              'number-input-no-comma': 'true',
              action: 'input->number-input#handleInput paste->number-input#handlePaste'
            }
          %>
        </div>
      </div>
    </div>

    <%# 右カラム: 発注単位 %>
    <div class="col-md-6">
      <%= form_group_lg(f, :unit_for_order_id,
          field_type: :collection_select,
          collection: current_user.units.where(category: :ordering),
          label: Material.human_attribute_name(:unit_for_order)
      ) %>
    </div>
  </div>
</div>

<%# 発注グループ選択 %>
<div class="row">
  <div class="col-md-6">
    <%= form_group_lg(f, :order_group_id,
        field_type: :collection_select,
        collection: MaterialOrderGroup.ordered_by_name
    ) %>
  </div>
</div>

<div class="row">
  <%# 説明（Description） %>
  <div class="col-md-12">
    <%= form_group_lg(f, :description,
        field_type: :text_area,
        rows: 5,
        character_counter: true,
        max_length: 1000
    ) %>
  </div>
</div>
