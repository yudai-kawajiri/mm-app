<%# 1. ヘッダー %>
<%= render 'shared/header_with_actions', title: t('materials.index.title') do %>

<%# 2. アクションパーシャル %>
  <%= render 'shared/actions/resource_header_actions',
      is_index_page: true,
      new_path: new_material_path
  %>
<% end %>

<%# 3. リソースリスト %>
<%= render 'shared/resource_list',
    resources: @materials,
    resource_class: Material,
    search_target: :category_id,

    search_categories: @search_categories,

    columns: [
      { header: :name, data: :name },
      { header: :category,
        data: Proc.new { |material| material.category&.name },
      },
      { header: :unit_for_product,
        data: Proc.new { |material| material.unit_for_product&.name }
      },
      { header: :unit_weight_for_product, data: :unit_weight_for_product },
      { header: :unit_for_order,
        data: Proc.new { |material| material.unit_for_order&.name }
      },
      { header: :unit_weight_for_order, data: :unit_weight_for_order }
    ]
  %>

<%# ページネーションはラッパーの外側で呼び出す %>
<%= paginate @materials, theme: 'bootstrap-5' %>