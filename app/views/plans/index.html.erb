<%= content_for(:title, t('plans.index.title')) %>

<% title = t('plans.index.title') %>

<%# ヘッダー（タイトル、新規作成ボタン） %>
<%= render 'shared/layouts/header_with_actions',
    title: title,
    resource: nil,
    is_index_page: true,
    is_form_page: false,
    is_show_page: false,
    new_path: new_plan_path
%>

<%# リソース一覧（検索、フィルター、テーブル） %>
<%= render('shared/components/resource_list',
    resources: @plans,
    resource_class: Plan,
    search_target: :category_id,
    search_categories: @search_categories,
    show_copy: true,
    copy_url_method: :copy_plan_path,

    columns: [
      { header: :name, data: :name },
      { header: :category_id,
        data: Proc.new { |plan| plan.category&.name }
      },
      { header: :status,
        data: Proc.new { |plan| render_plan_status_with_action(plan) }
      }
    ]
) %>

<%# ページネーション %>
<%= paginate @plans, theme: 'bootstrap-5' %>
