<%#
  機能: 商品詳細表示パーシャル
  - 商品名、カテゴリ、売価、品番、ステータス、画像、説明を表示
  - 詳細画面で使用

  必須引数:
  - product: Product - 表示対象の商品
  または
  - resource: Product - 表示対象の商品（代替引数）
%>
<% product = local_assigns[:product] || local_assigns[:resource] %>
<% product_class = product.class %>
<% no_setting = t('helpers.no_setting') %>

<div class="row">
  <div class="col-md-6">
    <div class="mb-3 border-bottom py-3">
      <label class="form-label mb-0 text-muted" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:name) %></label>
      <div class="text-dark text-center pt-2" style="font-size: 1.1em; font-weight: 500;">
        <%= product.name %>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="mb-3 border-bottom py-3">
      <label class="form-label mb-0 text-muted" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:category_id) %></label>
      <div class="text-dark text-center pt-2" style="font-size: 1.1em; font-weight: 500;">
        <%= product.category&.name || no_setting %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="mb-3 border-bottom py-3">
      <label class="form-label mb-0 text-muted" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:price) %></label>
      <div class="text-dark text-center pt-2" style="font-size: 1.1em; font-weight: 500;">
        <%= product.price ? number_with_precision(product.price, precision: 0) : no_setting %>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="mb-3 border-bottom py-3">
      <label class="form-label mb-0 text-muted" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:item_number) %></label>
      <div class="text-dark text-center pt-2" style="font-size: 1.1em; font-weight: 500;">
        <%= product.item_number.presence || no_setting %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="mb-3 border-bottom py-3">
      <label class="form-label mb-0 text-muted" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:status) %></label>
      <div class="text-dark text-center pt-2" style="font-size: 1.1em; font-weight: 500;">
        <%= t("activerecord.enums.product.status.#{product.status}") %>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="mb-3">
      <label class="form-label mb-0" style="font-size: 1.0em;"><%= product_class.human_attribute_name(:image) %></label>
      <div class="p-2 border rounded bg-light d-flex align-items-center justify-content-center"
          style="height: 150px; overflow: hidden;">
        <% if product.image.attached? %>
          <%= image_tag product.image,
              style: 'max-width: 100%; max-height: 140px; width: auto; height: auto; object-fit: contain;' %>
        <% else %>
          <span class="text-muted" style="font-size: 0.9em;"><%= no_setting %></span>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-12">
    <h6 class="text-muted" style="font-size: 1.1em;"><%= product_class.human_attribute_name(:description) %></h6>
    <div class="p-3 border rounded d-flex align-items-center justify-content-center" style="min-height: 150px;">
      <%= render 'shared/components/description_content', content: product.description %>
    </div>
  </div>
</div>
