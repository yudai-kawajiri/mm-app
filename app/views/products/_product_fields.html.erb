<%# 1. è£½å“å %>
<%= form_group_lg(f, :name) %>

<%# 2. å“ç›®ç•ªå· %>
<%= form_group_lg(f, :item_number) %>

<%# 3. å£²ä¾¡ %>
<div class="mb-4">
  <%= form_label_lg(f, :price) %>
  <div class="input-group input-group-lg">
    <span class="input-group-text"><%= t('number.currency.format.unit') %></span>
    <%= f.number_field :price, class: "form-control", step: 1, min: 0 %>
  </div>
</div>

<%# 4. ã‚«ãƒ†ã‚´ãƒª %>
<%= form_group_lg(f, :category_id,
                  field_type: :collection_select,
                  collection: @product_categories,
                  value_method: :id,
                  text_method: :name) %>

<%# 5. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ %>
<%= form_group_lg(f, :status,
                  field_type: :select,
                  choices: Product.statuses.keys.map { |status| [t("activerecord.enums.product.status.#{status}"), status] }) %>

<%# 6. èª¬æ˜Žã¨ç”»åƒã®2ã‚«ãƒ©ãƒ  %>
<div class="row mt-3">
  <%# å·¦ã‚«ãƒ©ãƒ : èª¬æ˜Ž %>
  <div class="col-md-6">
    <%# ðŸ†• Branch 8: æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¿½åŠ  %>
    <%= form_group_lg(f, :description,
                      field_type: :text_area,
                      character_counter: true,
                      max_length: 1000,
                      wrapper_class: 'mb-3') %>
  </div>

  <%# å³ã‚«ãƒ©ãƒ : ç”»åƒ %>
  <div class="col-md-6">
    <div class="mb-3">
      <%= f.label :image, class: "form-label" %>

      <%# æ—¢å­˜ã®ç”»åƒè¡¨ç¤ºã‚¨ãƒªã‚¢ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ %>
      <div class="text-center mb-1" style="overflow: hidden;">
        <% if f.object.persisted? && f.object.image.attached? %>
          <%# ä¿å­˜æ¸ˆã¿ã§ç”»åƒãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿è¡¨ç¤º %>
          <%= image_tag f.object.image, id: 'image-preview',
            style: "max-width: 100%; height: auto; display: block;",
            class: "img-thumbnail mb-2 mx-auto",
            data: { existing_image: 'true' } %>
        <% else %>
          <%# æ–°è¦ä½œæˆæ™‚ã¾ãŸã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼æ™‚ã¯ç©ºã®imgã‚¿ã‚°ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ï¼‰ %>
          <%= image_tag '', id: 'image-preview',
            style: "max-width: 100%; height: auto; display: none;",
            class: "img-thumbnail mb-2 mx-auto",
            data: { existing_image: 'false' } %>
        <% end %>
      </div>

      <%# ãƒœã‚¿ãƒ³è¡¨ç¤º %>
      <div class="text-center mb-2 mt-1">
        <%# 1. æ—¢å­˜ç”»åƒå‰Šé™¤ãƒœã‚¿ãƒ³ï¼ˆä¿å­˜æ¸ˆã¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ï¼‰ %>
        <% if f.object.persisted? && f.object.image.attached? %>
          <div id="current-image-container-<%= f.object.id %>">
            <%= link_to t('helpers.link.delete_image'), "#",
              data: { product_id: f.object.id, url: purge_image_product_path(f.object) },
              class: "btn btn-sm btn-danger",
              id: "delete-button-#{f.object.id}" %>
          </div>
        <% end %>

        <%# 2. æ–°è¦ç”»åƒé¸æŠžæ™‚ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ %>
        <div id="new-image-action" style="display: none;">
          <button type="button" id="cancel-new-image-button" class="btn btn-sm btn-outline-danger">
            <%= t('helpers.link.cancel_new_image') %>
          </button>
        </div>
      </div>

      <div class="mt-3">
        <%= f.file_field :image, id: 'product-image-input', class: "form-control" %>
        <small class="text-muted">
          <% if f.object.persisted? && f.object.image.attached? %>
            <%= t('products.image_help.change') %>
          <% else %>
            <%= t('products.image_help.select') %>
          <% end %>
        </small>
      </div>
    </div>
  </div>
</div>
