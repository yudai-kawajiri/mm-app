<% content_for(:page_title, t('products.new.title')) %>

<%= render 'shared/header_with_actions', title: t('.title') do %>
<%= render 'shared/actions/resource_header_actions',
      resource: @product,
      is_form_page: true,
      is_index_page: false,
      is_show_page: false
%>
<% end %>

<%# form_with のブロックを定義。画像を扱うため multipart: true を設定 %>
<%= form_with model: @product, local: true, html: { multipart: true } do |f| %>
  <%# 共通の二分割レイアウト (①) を呼び出し、パーシャルを渡す %>
  <%= render 'shared/resource_two_column_form',
              f: f,
              basic_fields: 'products/product_fields',
              detail_fields: 'products/product_materials_fields',
              resource_name: 'products'
  %>
  <div style="display:none;">
    <% submit_text = f.object.persisted? ? t('helpers.submit.update') : t('helpers.submit.create') %>
    <%= f.submit submit_text, id: "hidden-submit-#{dom_id(f.object)}" %>
  </div>
<% end %>