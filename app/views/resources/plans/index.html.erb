<%#
  機能: 製造計画一覧画面
  - 全製造計画の一覧表示
  - カテゴリ検索機能
  - ソート機能（名前順、ステータス順、カテゴリー順）
  - ステータス表示とアクション
  - コピー・印刷機能
%>
<%= content_for(:title, t('plans.index.title')) %>

<%= render 'shared/layouts/header_with_actions',
    title: t('plans.index.title'),
    resource: nil,
    is_index_page: true,
    is_form_page: false,
    is_show_page: false,
    new_path: new_resources_plan_path %>

<div>
  <%= render 'shared/components/resource_list',
      resources: @plans,
      resource_class: Resources::Plan,
      search_target: :category_id,
      search_categories: @plan_categories,
      sort_options: [
        [t('plans.index.sort_options.name'), 'name'],
        [t('plans.index.sort_options.status'), 'status'],
        [t('plans.index.sort_options.category'), 'category']
      ],
      sort_placeholder: t('plans.index.sort_placeholder'),
      show_copy: true,
      copy_url_method: :copy_resources_plan_path,
      show_print: true,
      print_url_method: :print_resources_plan_path,
      icon_mode: true,

      columns: [
        { header: :name, data: :name },
        { header: :category_id,
          data: Proc.new { |plan| plan.category&.name }
        },
        { header: :status,
          data: Proc.new { |plan| render_plan_status_with_action(plan) }
        }
      ]
  %>

  <%= paginate @plans, theme: 'bootstrap-5' %>
</div>
