<%# /shared/_category_tabs_nav.html.erb %>

<% product_categories = local_assigns[:product_categories] %>
<% is_active_category_id = local_assigns[:is_active_category_id] || 'all' %>
<% plan_plan_products = local_assigns[:plan_plan_products] || [] %>

<%# ðŸ’¡ [ä¿®æ­£] nav ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã€div ã« tabNav ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’è¨­å®š %>
<div class="nav nav-tabs" id="nav-tab" role="tablist" data-category-tab-manager-target="tabNav">

Â  Â  <%# ALLã‚¿ãƒ–ã®è¿½åŠ  Â %>
Â  Â  <button class="nav-link <%= is_active_category_id.to_s == '0' || is_active_category_id.to_s == 'all' ? 'active' : '' %>"
Â  Â  Â  id="nav-0-tab"
Â  Â  Â  data-bs-toggle="tab"
Â  Â  Â  data-bs-target="#nav-0"
Â  Â  Â  type="button"
Â  Â  Â  role="tab"
Â  Â  Â  aria-controls="nav-0"
Â  Â  Â  aria-selected="<%= is_active_category_id.to_s == '0' || is_active_category_id.to_s == 'all' ? 'true' : 'false' %>"
Â  Â  Â  data-category-id="0"
Â  Â  Â  data-action="click->plan-product-tabs#selectTab">
Â  Â  Â  <%= t('common.all') %>
Â  Â  </button>

Â  Â  <%# ðŸ’¡ ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° %>
Â  Â  <% displayed_category_ids = plan_plan_products.map { |pp| pp.product&.category_id }.compact.uniq %>
Â  Â  <% product_categories.select { |c| displayed_category_ids.include?(c.id) }.each do |category| %>
Â  Â  Â  <% category_id_str = category.id.to_s %>
Â  Â  Â  <button class="nav-link <%= category_id_str == is_active_category_id.to_s ? 'active' : '' %>"
Â  Â  Â  Â  id="nav-<%= category.id %>-tab"
Â  Â  Â  Â  data-bs-toggle="tab"
Â  Â  Â  Â  data-bs-target="#nav-<%= category.id %>"
Â  Â  Â  Â  type="button"
Â  Â  Â  Â  role="tab"
Â  Â  Â  Â  aria-controls="nav-<%= category.id %>"
Â  Â  Â  Â  aria-selected="<%= category_id_str == is_active_category_id.to_s ? 'true' : 'false' %>"
Â  Â  Â  Â  data-category-id="<%= category.id %>"
Â  Â  Â  Â  data-action="click->plan-product-tabs#selectTab">
Â  Â  Â  Â  <%= category.name %>
Â  Â  Â  </button>
Â  Â  <% end %>
</div>
<%# ðŸ‘† ã“ã‚Œã§é–‰ã˜ã‚¿ã‚°ã¯ä¸€ã¤ã ã‘ã«ãªã‚Šã€æ§‹é€ å´©å£Šã®åŽŸå› ãŒè§£æ¶ˆã•ã‚Œã¾ã™ã€‚ %>