<%# リソースフォーム %>
<%#
  機能:
  - 統一されたリソースフォームテンプレート
  - New/Edit ページで共通して使用
  - フォームバリデーションと二重送信防止機能付き

  必須引数:
  - resource: フォーム対象のモデルインスタンス
  - form_title: ページタイトル
  - submit_label: 送信ボタンのラベル

  Stimulusコントローラー:
  - form-validation: フォームバリデーション
  - form--submit: 二重送信防止
%>
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">
        <%= form_title %>
      </h2>
    </div>

    <div class="card-body">
      <%= render 'shared/forms/error_messages', resource: resource %>

      <%= form_with(
            model: resource,
            local: true,
            class: "needs-validation",
            data: {
              controller: "form-validation form--submit",
              action: "submit->form-validation#validate submit->form--submit#disableSubmit",
              form__submit_target: "form"
            }
          ) do |f| %>
        <%= render "#{resource.model_name.plural}/fields", f: f %>
        <%= render 'shared/actions/form_action_links', f: f, resource: resource %>
      <% end %>
    </div>
  </div>
</div>
