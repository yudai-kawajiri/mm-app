<%# リソースアクションリンク %>
<% show_link = local_assigns.fetch(:show_link, true) %>
<% edit_link = local_assigns.fetch(:edit_link, true) %>
<% destroy_link = local_assigns.fetch(:destroy_link, true) %>
<% show_print = local_assigns.fetch(:show_print, false) %>
<% show_csv = local_assigns.fetch(:show_csv, false) %>
<% csv_url = local_assigns[:csv_url] %>
<% print_url = local_assigns[:print_url] %>
<% show_copy = local_assigns.fetch(:show_copy, false) %>
<% copy_url = local_assigns[:copy_url] %>
<% icon_mode = local_assigns.fetch(:icon_mode, false) %>
<% scope = local_assigns.fetch(:scope, nil) %>

<% return if resource.nil? %>

<div class="d-flex">
  <% if icon_mode %>
    <% if show_link %>
      <%= link_to resource_path_with_scope(resource, scope),
          class: 'btn btn-sm btn-light me-1',
          title: t('helpers.link.show') do %>
        <i class="bi bi-eye"></i>
      <% end %>
    <% end %>

    <% if edit_link %>
      <%= link_to resource_path_with_scope(resource, scope, :edit),
          class: 'btn btn-sm btn-light me-1',
          title: t('helpers.link.edit') do %>
        <i class="bi bi-pencil"></i>
      <% end %>
    <% end %>

    <% if show_copy && copy_url.present? %>
      <% if can_create_store_resource? %>
        <%= link_to copy_url,
            method: :post,
            class: 'btn btn-sm btn-light me-1',
            title: t('helpers.link.copy'),
            data: { 
              turbo_method: :post,
              turbo_confirm: t('helpers.confirm.copy', resource: resource.class.model_name.human) 
            } do %>
          <i class="bi bi-files"></i>
        <% end %>
      <% else %>
        <button class="btn btn-sm btn-light me-1" disabled title="<%= t('helpers.select_store_to_create') %>">
          <i class="bi bi-files"></i>
        </button>
      <% end %>
    <% end %>

    <% if show_print && print_url.present? %>
      <%= link_to print_url,
          class: 'btn btn-sm btn-light me-1',
          title: t('helpers.link.print'),
          target: '_blank' do %>
        <i class="bi bi-printer"></i>
      <% end %>
    <% end %>

    <% if show_csv && csv_url.present? %>
      <%= link_to csv_url,
          class: 'btn btn-sm btn-success me-1',
          title: t('helpers.link.export_csv'),
          target: '_blank' do %>
        <i class="bi bi-filetype-csv"></i>
      <% end %>
    <% end %>

    <% if destroy_link %>
      <%= link_to resource_path_with_scope(resource, scope),
          class: 'btn btn-sm btn-danger',
          title: t('helpers.link.destroy'),
          data: { 
            turbo_method: :delete,
            turbo_confirm: t('helpers.confirm.destroy', resource: resource.class.model_name.human) 
          } do %>
        <i class="bi bi-trash"></i>
      <% end %>
    <% end %>
  <% else %>
    <% if show_link %>
      <%= link_to t('helpers.link.show'), resource_path_with_scope(resource, scope), class: 'btn btn-sm btn-light me-1' %>
    <% end %>
    <% if edit_link %>
      <%= link_to t('helpers.link.edit'), resource_path_with_scope(resource, scope, :edit), class: 'btn btn-sm btn-light me-1' %>
    <% end %>
    <% if show_copy && copy_url.present? %>
      <% if can_create_store_resource? %>
        <%= link_to t('helpers.link.copy'), copy_url, 
            class: 'btn btn-sm btn-light me-1',
            data: { 
              turbo_method: :post,
              turbo_confirm: t('helpers.confirm.copy', resource: resource.class.model_name.human) 
            } %>
      <% else %>
        <button class="btn btn-sm btn-light me-1" disabled>
          <%= t('helpers.link.copy') %>
        </button>
      <% end %>
    <% end %>
    <% if show_print && print_url.present? %>
      <%= link_to t('helpers.link.print'), print_url, class: 'btn btn-sm btn-light me-1', target: '_blank' %>
    <% end %>
    <% if show_csv && csv_url.present? %>
      <%= link_to t('helpers.link.export_csv'), csv_url, class: 'btn btn-sm btn-success me-1', target: '_blank' %>
    <% end %>
    <% if destroy_link %>
      <%= link_to t('helpers.link.destroy'), resource_path_with_scope(resource, scope), 
          class: 'btn btn-sm btn-danger',
          data: { 
            turbo_method: :delete,
            turbo_confirm: t('helpers.confirm.destroy', resource: resource.class.model_name.human) 
          } %>
    <% end %>
  <% end %>
</div>
